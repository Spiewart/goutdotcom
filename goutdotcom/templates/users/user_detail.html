{% extends "base.html" %}
{% load static %}

{% block title %}User: {{ object.username }}{% endblock %}

{% block content %}
<div class="container default-container">
  <main>
    <div class="media nested-container">
        <div class="media-body">
          <h1 class="default-container">{{ object.username|capfirst}}</h1>
            <div class="container default-container">
              {% if object.patientprofile.bio %}
                <h2>Bio: </h2>{{ object.patientprofile.bio }}
              {% else %}
                <h2>Enter a <a href="{% url 'profiles:update' 'requeest.user' object.patientprofile.pk %}">bio</a></h2>
              {% endif %}
            </div>
            <br>
            {% if object.patientprofile %}
              <div class="container default-container">
                  <div class="row">
                    <div class="col">
                      {% if object.name %}
                        <li>{{ object.name }}</li>
                      {% else %}
                        <li>Name: not recorded</li>
                      {% endif %}
                    </div>
                    <div class="col">
                    {% if object.patientprofile.date_of_birth %}
                      <li>Date of Birth: {{ object.patientprofile.date_of_birth }}</li>
                    {% else %}
                      <li>Date of Birth: not recorded</li>
                    {% endif %}
                    </div>
                    <div class="col">
                    {% if object.patientprofile.date_of_birth %}
                      <li>Age: {{ object.patientprofile.get_age }}</li>
                    {% else %}
                      <li>Age: can't calculate age without DoB<li>
                    {% endif %}
                    </div>
                  </div>
                  <div class="row">
                    <div class="col">
                    {% if object.patientprofile.gender %}
                      <li>Gender: {{ object.patientprofile.gender|capfirst }}</li>
                    {% else %}
                      <li>Gender: not recorded</li>
                    {% endif %}
                    </div>
                    <div class="col">
                    {% if object.patientprofile.race %}
                      <li>Race: {{ object.patientprofile.race|capfirst }}</li>
                    {% else %}
                      <li>Race: not recorded</li>
                    {% endif %}
                    </div>
                    <div class="col">
                    {% if object.patientprofile.drinks_per_week %}
                      <li>Drinks / Week: {{ object.patientprofile.drinks_per_week }}
                    {% else %}
                      <li>Drinks / Week: not recorded</li>
                    {% endif %}
                    </div>
                  </div>
                  {% if object.patientprofile.weight and object.patientprofile.height %}
                  <div class="row">
                    <div class="col">
                    {% if object.patientprofile.weight %}
                      <li><a href="{% url 'vitals:list' 'weight' %}">Weight: </a><a href="{% url 'vitals:detail' 'weight' object.patientprofile.weight.pk %}">{{ object.patientprofile.weight }}</a></li>
                    {% else %}
                      <li>Weight: not recorded</li>
                    {% endif %}
                    </div>
                    <div class="col">
                    {% if object.patientprofile.height %}
                    <li><a href="{% url 'vitals:list' 'height' %}">Height: </a><a href="{% url 'vitals:detail' 'height' object.patientprofile.height.pk %}">{{ object.patientprofile.height }}</a></li>
                    {% else %}
                      <li><a href="{% url 'vitals:create' 'height' %}">Height</a>: not recorded</li>
                    {% endif %}
                    </div>
                    <div class="col">
                    {% if object.patientprofile.weight and object.patientprofile.height %}
                    <li>BMI: {{ object.patientprofile.BMI_calculator|stringformat:".1f" }}</li>
                    {% elif object.patientprofile.weight %}
                    <li>BMI: can't calculate BMI without <a href="{% url 'profiles:update' 'requeest.user' object.patientprofile.pk %}">height</a> and weight</li>
                    {% elif object.patient.profile.height %}
                    <li>BMI: can't calculate BMI without height and <a href="{% url 'profiles:update' 'requeest.user' object.patientprofile.pk %}">weight</a></li>
                    {% endif %}
                    </div>
                  </div>
                  {% endif %}
                </div>
              </div>
                {% if object.patientprofile.picture %}
                  <div class="media">
                  <img src="{{ object.patientprofile.picture.url }}" id="profilepic" width="250" height="250" alt="{{ object.username|capfirst }}'s Picture">
                  </div>
                {% endif %}
              </div>
              </div>
            {% else %}
            <p>Want to complete your profile?</p>
            <a class="btn btn-primary" href="{% url 'profiles:create' %}" role="button">Create Profile</a>
            {% endif %}

      </main>
  <footer>
    {% if object == request.user %}
      <a class="btn btn-primary btn-lg" href="{% url 'users:update' %}" role="button">My Info</a>
      <a class="btn btn-primary btn-lg" href="{% url 'account_email' %}" role="button">E-Mail</a>
      {% if request.user.patientprofile %}
        <a class="btn btn-primary btn-lg" href="{% url 'profiles:update' request.user request.user.patientprofile.pk %}" role="button">Profile</a>
      {% endif %}
    {% endif %}
  </footer>
</div>
{% endblock content %}
