{% extends "base.html" %}
{% load static %}
{% load flareaid_extras %}

{% block content %}
<main class="container content-container">
      {% block header %}
        <div class="row">
          <div class="col">
        {% if object.decision_aid != "Need More Information" %}
          <a class="btn btn-primary btn-lg" href="{% url 'flareaid:create' %}" role="button">New</a>
          {% if request.user.is_authenticated %}
            {% if object.flare %}
            <a class="btn btn-primary btn-lg" href="{% url 'flareaid:flare-update' pk=object.pk flare=object.flare.pk %}"
              role="button">Update</a>
            {% else %}
            <a class="btn btn-primary btn-lg" href="{% url 'flareaid:update' pk=object.pk %}" role="button">Update</a>
            {% endif %}
          {% endif %}
          <span>{{ object.decision_string }}</span>
          {% if object.decision_aid == "NSAID" %}
            <a class="btn btn-primary btn-lg" href="{% url 'treatment:about' 'ibuprofen' %}" role="button">About</a>
          {% elif object.decision_aid == "colchicine" %}
            <a class="btn btn-primary btn-lg" href="{% url 'treatment:about' 'colchicine' %}" role="button">About</a>
          {% elif object.decision_aid == "steroids" %}
            <a class="btn btn-primary btn-lg" href="{% url 'treatment:about' 'steroids' %}" role="button">About</a>
          {% endif %}
        {% else %}
          {% if request.user.is_authenticated %}
            <a class="btn btn-primary btn-lg" href="{% url 'flareaid:update' object.pk %}" role="button">Update</a>
          {% else %}
            <a class="btn btn-primary btn-lg" href="{% url 'flareaid:create' %}" role="button">New</a>
          {% endif %}
        {% endif %}
        <h1 id="rec">FlareAid:
          {% if object.decision_aid|get_key:'doctor' == True %}
            See a Doctor
          {% elif object.decision_aid|get_key:'drug1'|get_key:'drug' == "prednisone" %}
            steroids
          {% elif object.decision_aid|get_key:'drug1'|get_key:'drug' == "colchicine" %}
            colchicine
          {% elif object.decision_aid|get_key:'drug1'|get_key:'drug' == "ibuprofen" or object.decision_aid|get_key:'drug1'|get_key:'drug' == "naproxen" %}
            NSAIDs
          {% elif object.decision_aid|get_key:'needinfo' == True %}
            more information needed
          {% else %}
            ERROR
          {% endif %}
        </h1>
        </div>
      </div>
      <div class="row">
        <div class="col">
          {% if object.flare %}
          <h4><a href="{% url 'flare:detail' object.flare.pk %}">Flare</a>: {{ object.flare }}</h4>
          {% endif %}
        </div>
      </div>
      {% endblock header %}
      {% block recommendation %}
        {% include 'flareaid/recommendation.html' %}
      {% endblock recommendation %}
      {% block quicklinks %}
      <hr size="6" color="white">
      <h2 class="content-heading">Quick Links</h2>
      <ol id="quick-link-list">
        <li><a href="#explanation">Explanation</a></li>
        <li><a href="#methodology">Methodology</a></li>
        {% if object.decision_aid != "doctor" %}
          <li><a href="#options">Options</a></li>
        {% endif %}
        <li><a href="#references">References</a></li>
      </ol>
      {% endblock quicklinks %}
      {% block explanation %}
        {% include 'flareaid/explanation.html' %}
      {% endblock explanation %}
      {% block methodology %}
        {% include 'flareaid/methodology.html' %}
      {% endblock methodology %}
      {% block options %}
        {% include 'flareaid/options.html' %}
      {% endblock options %}
      {% block references %}
        {% include 'flareaid/references.html' %}
      {% endblock references %}
  <hr size="6" color="white">
  {% block footer %}
    <div class="row">
      <div class="col">
        <u><a href="#rec">Back to Top</a></u>
      </div>
      <div class="col" id="edited">
        {% if request.user.is_anonymous %}
          <span>{{ object.created.date }}</span>
        {% elif request.user %}
          <span>{{ request.user|capfirst }} {{ object.created.date }}</span>
        {% endif %}
      </div>
    </div>
  {% endblock footer %}
</main>
{% endblock content %}
